name: æ‰“åŒ…Vueé¡¹ç›®

on:
  push:
    branches:
      - master # æ³¨æ„æ˜¯mainåˆ†æ”¯è¿˜æ˜¯masteråˆ†æ”¯

jobs:
  npm-build:
    name: npm-buildå·¥ä½œ
    runs-on: ubuntu-latest

    steps:
      # - name: è¯»å–ä»“åº“å†…å®¹ ğŸ¤”
      #   uses: actions/checkout@v4 # å¤åˆ¶æ–‡ä»¶åˆ°githubï¼Œè§£å†³ubuntuè·¯å¾„é—®é¢˜

      # - name: å®‰è£…ä¾èµ–âš™
      #   run: npm install

      # - name: é¡¹ç›®æ‰“åŒ…ä¸­ğŸ“¦
      #   run: npm run build

      # - name: Deploy to Server via SSH
      #   uses: appleboy/ssh-action@master
      #   with:
      #   host: ${{ secrets.SERVER_HOST }} # æœåŠ¡å™¨åœ°å€ï¼Œä»secretsè·å–
      #   username: ${{ secrets.SERVER_USERNAME }} # æœåŠ¡å™¨ç”¨æˆ·åï¼Œä»secretsè·å–
      #   password: ${{ secrets.SERVER_PASSWORD }} # æœåŠ¡å™¨å¯†ç æˆ–ç§é’¥ï¼Œä»secretsè·å–ï¼Œæ¨èä½¿ç”¨ç§é’¥æ›´å®‰å…¨
      #   port: ${{ secrets.SERVER_PORT }} test2

      - name: ğŸ“‚ é…ç½® SSH è®¿é—®æœåŠ¡å™¨
        env:
          SSH_PRIVATE_KEY: ${{ secrets.SSH_PRIVATE_KEY }}
          SERVER_HOST: ${{ secrets.SERVER_HOST }}
          AOAO_PATH: ${{ secrets.AOAO_PATH }}
        # run: |
        #   echo "æœåŠ¡å™¨åœ°å€: [$SERVER_HOST]"
        #   ping -c 3 $SERVER_HOST
        #   nslookup $SERVER_HOST

        run: |
          mkdir -p ~/.ssh
          echo "$SSH_PRIVATE_KEY" > ~/.ssh/id_rsa
          chmod 600 ~/.ssh/id_rsa
          ssh -o StrictHostKeyChecking=no root@$SERVER_HOST "echo 'SSH Connection Successful!'"

      # - name: ğŸš€ ä½¿ç”¨ SCP ä¸Šä¼ æ–‡ä»¶åˆ°æœåŠ¡å™¨
      #   run: |
      #     scp -i ~/.ssh/id_rsa -r dist/ root@$SERVER_HOST:$AOAO_PATH
